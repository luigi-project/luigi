function w(r,i){(i==null||i>r.length)&&(i=r.length);for(var t=0,e=Array(i);t<i;t++)e[t]=r[t];return e}function _(r){if(Array.isArray(r))return r}function T(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function h(r,i,t){return i=C(i),F(r,L()?Reflect.construct(i,[],C(r).constructor):i.apply(r,t))}function v(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function O(r,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,b(e.key),e)}}function f(r,i,t){return i&&O(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r}function A(r,i){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=M(r))||i){t&&(r=t);var e=0,n=function(){};return{s:n,n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:function(l){throw l},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,u=!1;return{s:function(){t=t.call(r)},n:function(){var l=t.next();return a=l.done,l},e:function(l){u=!0,o=l},f:function(){try{a||t.return==null||t.return()}finally{if(u)throw o}}}}function j(r,i,t){return(i=b(i))in r?Object.defineProperty(r,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[i]=t,r}function C(r){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},C(r)}function p(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&k(r,i)}function L(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L=function(){return!!r})()}function V(r,i){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var e,n,o,a,u=[],l=!0,d=!1;try{if(o=(t=t.call(r)).next,i!==0)for(;!(l=(e=o.call(t)).done)&&(u.push(e.value),u.length!==i);l=!0);}catch(g){d=!0,n=g}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw n}}return u}}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(r,i){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);i&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,e)}return t}function x(r){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?P(Object(t),!0).forEach(function(e){j(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function F(r,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(r)}function k(r,i){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(r,i)}function U(r,i){return _(r)||V(r,i)||M(r,i)||D()}function R(r,i){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var e=t.call(r,i);if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function b(r){var i=R(r,"string");return typeof i=="symbol"?i:i+""}function M(r,i){if(r){if(typeof r=="string")return w(r,i);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(r,i):void 0}}var y=(function(){function r(){v(this,r),this.promises={}}return f(r,[{key:"setPromise",value:function(t,e){this.promises[t]=e}},{key:"getPromise",value:function(t){return this.promises[t]}}])})(),N=(function(){function r(){v(this,r),this.listeners=[],this.origin="";var i=(function(t){if(t.data.msg)if(t.data.msg==="custom"){var e=this.convertCustomMessageInternalToUser(t.data);this.listeners.filter(function(n){return n.name===e.id}).map(function(n){return n.eventFn(e,n.listenerId)})}else this.listeners.filter(function(n){return n.name===t.data.msg}).map(function(n){return n.eventFn(t,n.listenerId)})}).bind(this);window.addEventListener("message",i)}return f(r,[{key:"convertCustomMessageInternalToUser",value:function(t){return t.data}},{key:"convertCustomMessageUserToInternal",value:function(t){return{msg:"custom",data:t}}},{key:"convertStorageMessageToInternal",value:function(t){return{msg:"storage",data:t}}},{key:"addEventListener",value:function(t,e){var n=this.getRandomId();return this.listeners.push({name:t,eventFn:e,listenerId:n}),n}},{key:"removeEventListener",value:function(t){var e=!!this.listeners.find(function(n){return n.listenerId===t});return e?(this.listeners=this.listeners.filter(function(n){return n.listenerId!==t}),!0):!1}},{key:"getRandomId",value:function(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}},{key:"isFunction",value:function(t){return typeof t=="function"}},{key:"isObject",value:function(t){return Object.prototype.toString.call(t)==="[object Object]"}},{key:"getLuigiCoreDomain",value:function(){return this.origin}},{key:"setLuigiCoreDomain",value:function(t){t&&t!=="null"&&(this.origin=t)}},{key:"setTargetOrigin",value:function(t){this.setLuigiCoreDomain(t)}},{key:"sendPostMessageToLuigiCore",value:function(t){if(this.origin)try{window.parent.postMessage(t,this.origin)}catch(e){console.warn("Unable to post message "+t+" to Luigi Core from origin "+this.origin+": "+e)}else console.warn('There is no target origin set. You can specify the target origin by calling LuigiClient.setTargetOrigin("targetorigin") in your micro frontend.')}},{key:"hasIntent",value:function(t){return!!t&&t.toLowerCase().includes("#?intent=")}},{key:"deSanitizeParamsMap",value:function(t){var e=this;return Object.entries(t).reduce(function(n,o){return n[e.deSanitizeParam(o[0])]=e.deSanitizeParam(o[1]),n},{})}},{key:"deSanitizeParam",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return String(t).replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&#39;","'").replaceAll("&sol;","/")}}])})(),s=new N;const z="2.26.0";var $=(function(r){function i(){var t;return v(this,i),t=h(this,i),t.luigiInitialized=!1,t.defaultContextKeys=["context","internal","nodeParams","pathParams","searchParams"],t.setCurrentContext(t.defaultContextKeys.reduce(function(e,n){return e[n]={},e},{})),t._onContextUpdatedFns={},t._onInactiveFns={},t._onInitFns={},t.authData={},t._isDeferInitDefined()||t.luigiClientInit(),t}return p(i,r),f(i,[{key:"_isDeferInitDefined",value:function(){return window.document.head.hasAttribute("defer-luigi-init")}},{key:"_isTpcCheckDisabled",value:function(){var e,n,o;return window.document.head.hasAttribute("disable-tpc-check")||((e=this.currentContext)===null||e===void 0||(n=e.internal)===null||n===void 0||(o=n.thirdPartyCookieCheck)===null||o===void 0?void 0:o.disabled)}},{key:"isLuigiClientInitialized",value:function(){return this.luigiInitialized}},{key:"luigiClientInit",value:function(){var e=this;if(this.luigiInitialized){console.warn("Luigi Client has been already initialized");return}var n=function(u){for(var l=0;l<e.defaultContextKeys.length;l++){var d=e.defaultContextKeys[l];try{typeof u[d]=="string"&&(u[d]=JSON.parse(u[d]))}catch(g){console.info("unable to parse luigi context data for",d,u[d],g)}}e.setCurrentContext(u)},o=function(u){u&&(e.authData=u)};s.addEventListener("luigi.init",function(a){n(a.data),o(a.data.authData),s.setLuigiCoreDomain(a.origin),e.luigiInitialized=!0,e._notifyInit(a.origin),e._tpcCheck(),s.sendPostMessageToLuigiCore({msg:"luigi.init.ok"})}),s.addEventListener("luigi-client.inactive-microfrontend",function(a){e._notifyInactive(a.origin)}),s.addEventListener("luigi.auth.tokenIssued",function(a){o(a.data.authData)}),s.addEventListener("luigi.navigate",function(a){if(n(a.data),!e.currentContext.internal.isNavigateBack&&!e.currentContext.withoutSync){var u=window.location.hash;history.replaceState({luigiInduced:!0},"",a.data.viewUrl),window.dispatchEvent(new PopStateEvent("popstate",{state:"luiginavigation"})),window.location.hash!==u&&window.dispatchEvent(new HashChangeEvent("hashchange"))}e.currentContext.withoutSync&&Object.assign(e.currentContext.context,{viewUrl:a.data.viewUrl?a.data.viewUrl:void 0,pathParams:a.data.pathParams?a.data.pathParams:void 0}),e._notifyUpdate(),s.sendPostMessageToLuigiCore({msg:"luigi.navigate.ok"})}),window.parent.postMessage({msg:"luigi.get-context",clientVersion:z},"*")}},{key:"_tpcCheck",value:function(){if(!this._isTpcCheckDisabled()){var e="enabled",n=document.cookie,o;n&&(o=n.split(";").map(function(a){return a.trim()}).find(function(a){return a==="luigiCookie=true"})),o==="luigiCookie=true"&&(document.cookie="luigiCookie=; Max-Age=-99999999; SameSite=None; Secure"),document.cookie="luigiCookie=true; SameSite=None; Secure",n=document.cookie,n&&(o=n.split(";").map(function(a){return a.trim()}).find(function(a){return a==="luigiCookie=true"})),o==="luigiCookie=true"?(document.cookie="luigiCookie=; Max-Age=-99999999; SameSite=None; Secure",window.parent.postMessage({msg:"luigi.third-party-cookie",tpc:e},"*")):(e="disabled",window.parent.postMessage({msg:"luigi.third-party-cookie",tpc:e},"*"),console.warn("Third party cookies are not supported!"))}}},{key:"_callAllFns",value:function(e,n,o){for(var a in e)e.hasOwnProperty(a)&&s.isFunction(e[a])&&e[a](n,o)}},{key:"_notifyInit",value:function(e){this._callAllFns(this._onInitFns,this.currentContext.context,e)}},{key:"_notifyUpdate",value:function(){this._callAllFns(this._onContextUpdatedFns,this.currentContext.context)}},{key:"_notifyInactive",value:function(){this._callAllFns(this._onInactiveFns)}},{key:"setCurrentContext",value:function(e){this.currentContext=e}},{key:"addInitListener",value:function(e,n){var o=s.getRandomId();return this._onInitFns[o]=e,n&&document.head.setAttribute("disable-tpc-check",""),this.luigiInitialized&&s.isFunction(e)&&e(this.currentContext.context,s.getLuigiCoreDomain()),o}},{key:"removeInitListener",value:function(e){return this._onInitFns[e]?(this._onInitFns[e]=void 0,!0):!1}},{key:"addContextUpdateListener",value:function(e){var n=s.getRandomId();return this._onContextUpdatedFns[n]=e,this.luigiInitialized&&s.isFunction(e)&&e(this.currentContext.context),n}},{key:"removeContextUpdateListener",value:function(e){return this._onContextUpdatedFns[e]?(this._onContextUpdatedFns[e]=void 0,!0):!1}},{key:"addInactiveListener",value:function(e){var n=s.getRandomId();return this._onInactiveFns[n]=e,n}},{key:"removeInactiveListener",value:function(e){return this._onInactiveFns[e]?(this._onInactiveFns[e]=void 0,!0):!1}},{key:"addCustomMessageListener",value:function(e,n){return s.addEventListener(e,function(o,a){return n(o,a)})}},{key:"removeCustomMessageListener",value:function(e){return s.removeEventListener(e)}},{key:"getToken",value:function(){return this.authData.accessToken}},{key:"getContext",value:function(){return this.getEventData()}},{key:"getEventData",value:function(){return this.currentContext.context}},{key:"getActiveFeatureToggles",value:function(){var e;return(e=this.currentContext.internal.activeFeatureToggleList)!==null&&e!==void 0?e:[]}},{key:"addNodeParams",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e&&s.sendPostMessageToLuigiCore({msg:"luigi.addNodeParams",data:e,keepBrowserHistory:n})}},{key:"getNodeParams",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return e?s.deSanitizeParamsMap(this.currentContext.nodeParams):this.currentContext.nodeParams}},{key:"getPathParams",value:function(){return this.currentContext.pathParams}},{key:"getCoreSearchParams",value:function(){return this.currentContext.searchParams||{}}},{key:"addCoreSearchParams",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e&&s.sendPostMessageToLuigiCore({msg:"luigi.addSearchParams",data:e,keepBrowserHistory:n})}},{key:"getClientPermissions",value:function(){return this.currentContext.internal.clientPermissions||{}}},{key:"setTargetOrigin",value:function(e){s.setTargetOrigin(e)}},{key:"sendCustomMessage",value:function(e){var n=s.convertCustomMessageUserToInternal(e);s.sendPostMessageToLuigiCore(n)}},{key:"getUserSettings",value:function(){return this.currentContext.internal.userSettings}},{key:"getAnchor",value:function(){return this.currentContext.internal.anchor||""}},{key:"setAnchor",value:function(e){s.sendPostMessageToLuigiCore({msg:"luigi.setAnchor",anchor:e})}},{key:"setViewGroupData",value:function(e){s.sendPostMessageToLuigiCore({msg:"luigi.setVGData",data:e})}}])})(y),c=new $,B=(function(r){function i(t){var e;v(this,i),e=h(this,i),e.validSplitViewEvents=["expand","collapse","resize","close"],e.splitView={exists:!0,size:40,collapsed:!1},Object.assign(e.splitView,t);var n=function(){e.splitView.listeners.forEach(function(a){return s.removeEventListener(a)})};return e.splitView.listeners=[s.addEventListener("luigi.navigation.splitview.internal",function(o){Object.assign(e.splitView,o.data.data)})],e.on("resize",function(o){e.splitView.size=o}),e.on("close",n),e}return p(i,r),f(i,[{key:"sendSplitViewEvent",value:function(e,n){s.sendPostMessageToLuigiCore({msg:"luigi.navigation.splitview.".concat(e),data:n})}},{key:"collapse",value:function(){this.sendSplitViewEvent("collapse")}},{key:"expand",value:function(){this.sendSplitViewEvent("expand")}},{key:"close",value:function(){this.sendSplitViewEvent("close")}},{key:"setSize",value:function(e){this.sendSplitViewEvent("resize",e)}},{key:"on",value:function(e,n){if(!this.validSplitViewEvents.includes(e))return console.warn(e+" is not a valid split view event"),!1;var o=s.addEventListener("luigi.navigation.splitview.".concat(e,".ok"),function(a){var u=typeof a.data.data=="number"?a.data.data:void 0;n(u)});return this.splitView.listeners.push(o),o}},{key:"removeEventListener",value:function(e){return s.removeEventListener(e)}},{key:"exists",value:function(){return this.splitView.exists}},{key:"getSize",value:function(){return this.splitView.size}},{key:"isCollapsed",value:function(){return this.splitView.collapsed}},{key:"isExpanded",value:function(){return!this.splitView.collapsed}}])})(y),H=(function(r){function i(t){var e;return v(this,i),e=h(this,i),Object.assign(e,t),e.options={preserveView:!1,nodeParams:{},errorSkipNavigation:!1,fromContext:null,fromClosestContext:!1,fromVirtualTreeRoot:!1,fromParent:!1,relative:!1,link:"",newTab:!1,preserveQueryParams:!1,anchor:"",preventContextUpdate:!1,preventHistoryEntry:!1},e}return p(i,r),f(i,[{key:"navigate",value:function(e,n,o,a,u,l){if(this.options.errorSkipNavigation){this.options.errorSkipNavigation=!1;return}a&&u&&l&&console.warn("modalSettings, splitViewSettings and drawerSettings cannot be used together. Only modal setting will be taken into account."),this.options.preserveView=o;var d=e[0]!=="/";if(e==="/"&&(a||u||l)){console.warn("Navigation with an absolute path prevented.");return}var g={msg:"luigi.navigation.open",sessionId:n,params:Object.assign(this.options,{link:e,relative:d,intent:s.hasIntent(e),modal:a,splitView:u,drawer:l})};s.sendPostMessageToLuigiCore(g)}},{key:"updateModalPathInternalNavigation",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!e){console.warn("Updating path of the modal upon internal navigation prevented. No path specified.");return}var a={msg:"luigi.navigation.updateModalDataPath",params:Object.assign(this.options,{link:e,modal:n,history:o})};s.sendPostMessageToLuigiCore(a)}},{key:"navigateToIntent",value:function(e){var n,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a="#?intent=";if(a+=e,o&&(n=Object.keys(o))!==null&&n!==void 0&&n.length){var u=Object.entries(o);if(u.length>0){a+="?";var l=A(u),d;try{for(l.s();!(d=l.n()).done;){var g=U(d.value,2),I=g[0],S=g[1];a+=I+"="+S+"&"}}catch(E){l.e(E)}finally{l.f()}a=a.slice(0,-1)}}this.navigate(a)}},{key:"openAsModal",value:function(e){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.addEventListener("luigi.navigation.modal.close",function(u,l){var d=n.getPromise("modal");if(d){var g;d.resolveFn(x(x({},u.data),{},{goBackValue:(g=u.data)===null||g===void 0?void 0:g.data})),n.setPromise("modal",void 0)}s.removeEventListener(l)});var a={};return a.promise=new Promise(function(u,l){a.resolveFn=u,a.rejectFn=l}),this.setPromise("modal",a),this.navigate(e,0,!0,o),a.promise}},{key:"updateModalSettings",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o={msg:"luigi.navigation.updateModalSettings",updatedModalSettings:e,addHistoryEntry:n};s.sendPostMessageToLuigiCore(o)}},{key:"openAsSplitView",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.navigate(e,0,!0,void 0,n),new B(n)}},{key:"openAsDrawer",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.navigate(e,0,!0,void 0,void 0,n)}},{key:"fromContext",value:function(e){var n=this.currentContext.context.parentNavigationContexts&&this.currentContext.context.parentNavigationContexts.indexOf(e)!==-1;return n?this.options.fromContext=e:(this.options.errorSkipNavigation=!0,console.error("Navigation not possible, navigationContext "+e+" not found.")),this}},{key:"fromClosestContext",value:function(){var e,n=((e=this.currentContext)===null||e===void 0?void 0:e.context.parentNavigationContexts.length)>0;return n?(this.options.fromContext=null,this.options.fromClosestContext=!0):console.error("Navigation not possible, no parent navigationContext found."),this}},{key:"fromVirtualTreeRoot",value:function(){return this.options.fromContext=null,this.options.fromClosestContext=!1,this.options.fromVirtualTreeRoot=!0,this}},{key:"fromParent",value:function(){return this.options.fromParent=!0,this}},{key:"withParams",value:function(e){return e&&Object.assign(this.options.nodeParams,e),this}},{key:"withOptions",value:function(e){return s.isObject(e)?(e.preventHistoryEntry!==void 0&&(this.options.preventHistoryEntry=e.preventHistoryEntry),e.preventContextUpdate!==void 0&&(this.options.preventContextUpdate=e.preventContextUpdate),this):this}},{key:"pathExists",value:function(e){var n=s.getRandomId(),o=this.getPromise("pathExistsPromises")||{};o[n]={resolveFn:function(){},then:function(l){this.resolveFn=l}},this.setPromise("pathExistsPromises",o),s.addEventListener("luigi.navigation.pathExists.answer",(function(u,l){var d=u.data.data,g=this.getPromise("pathExistsPromises")||{};d.correlationId===n&&(g[d.correlationId]&&(g[d.correlationId].resolveFn(d.pathExists),delete g[d.correlationId],this.setPromise("pathExistsPromises",g)),s.removeEventListener(l))}).bind(this));var a={msg:"luigi.navigation.pathExists",data:Object.assign(this.options,{id:n,link:e,intent:s.hasIntent(e),relative:e[0]!=="/"})};return s.sendPostMessageToLuigiCore(a),o[n]}},{key:"hasBack",value:function(){return!!this.currentContext.internal.modal||this.currentContext.internal.viewStackSize!==0}},{key:"goBack",value:function(e){s.sendPostMessageToLuigiCore({msg:"luigi.navigation.back",goBackContext:e&&JSON.stringify(e)})}},{key:"withoutSync",value:function(){return this.options.withoutSync=!0,this}},{key:"newTab",value:function(){return this.options.newTab=!0,this}},{key:"preserveQueryParams",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.options.preserveQueryParams=e,this}},{key:"getCurrentRoute",value:function(){var e=this,n=s.getRandomId(),o=this.getPromise("getCurrentRoute")||{};return o[n]={resolveFn:function(){},then:function(u){this.resolveFn=u}},this.setPromise("getCurrentRoute",o),s.addEventListener("luigi.navigation.currentRoute.answer",function(a,u){var l=a.data.data,d=e.getPromise("getCurrentRoute")||{};l.correlationId===n&&(d[l.correlationId]&&(d[l.correlationId].resolveFn(l.route),delete d[l.correlationId],e.setPromise("getCurrentRoute",d)),s.removeEventListener(u)),s.removeEventListener(u)}),s.sendPostMessageToLuigiCore({msg:"luigi.navigation.currentRoute",data:Object.assign(this.options,{id:n})}),o[n]}}])})(y),K=(function(r){function i(){var t;return v(this,i),t=h(this,i),s.addEventListener("luigi.current-locale-changed",function(e){var n;e.data.currentLocale&&(n=c.currentContext)!==null&&n!==void 0&&n.internal&&(c.currentContext.internal.currentLocale=e.data.currentLocale,c._notifyUpdate())}),t}return p(i,r),f(i,[{key:"showLoadingIndicator",value:function(){s.sendPostMessageToLuigiCore({msg:"luigi.show-loading-indicator"})}},{key:"hideLoadingIndicator",value:function(){s.sendPostMessageToLuigiCore({msg:"luigi.hide-loading-indicator"})}},{key:"closeCurrentModal",value:function(){s.sendPostMessageToLuigiCore({msg:"luigi.close-modal"})}},{key:"addBackdrop",value:function(){s.sendPostMessageToLuigiCore({msg:"luigi.add-backdrop"})}},{key:"removeBackdrop",value:function(){s.sendPostMessageToLuigiCore({msg:"luigi.remove-backdrop"})}},{key:"setDirtyStatus",value:function(e){s.sendPostMessageToLuigiCore({msg:"luigi.set-page-dirty",dirty:e})}},{key:"showConfirmationModal",value:function(e){var n=this;s.addEventListener("luigi.ux.confirmationModal.hide",function(a,u){n.hideConfirmationModal(a.data.data),s.removeEventListener(u)}),s.sendPostMessageToLuigiCore({msg:"luigi.ux.confirmationModal.show",data:{settings:e}});var o={};return o.promise=new Promise(function(a,u){o.resolveFn=a,o.rejectFn=u}),this.setPromise("confirmationModal",o),o.promise}},{key:"hideConfirmationModal",value:function(e){var n=this.getPromise("confirmationModal");n&&(e.confirmed?n.resolveFn():n.rejectFn(),this.setPromise("confirmationModal",void 0))}},{key:"showAlert",value:function(e){var n=this;e.id=s.getRandomId(),s.addEventListener("luigi.ux.alert.hide",function(a,u){a.data.id===e.id&&(n.hideAlert(a.data),s.removeEventListener(u))}),e?.closeAfter<100&&(console.warn("Message with id='".concat(e.id,"' has too small 'closeAfter' value. It needs to be at least 100ms.")),e.closeAfter=void 0),s.sendPostMessageToLuigiCore({msg:"luigi.ux.alert.show",data:{settings:e}});var o=this.getPromise("alerts")||{};return o[e.id]={},o[e.id].promise=new Promise(function(a){o[e.id].resolveFn=a}),this.setPromise("alerts",o),o[e.id].promise}},{key:"hideAlert",value:function(e){var n=e.id,o=e.dismissKey,a=this.getPromise("alerts");n&&a[n]&&(a[n].resolveFn(o||n),delete a[n],this.setPromise("alerts",a))}},{key:"getCurrentLocale",value:function(){var e,n;return(e=c.currentContext)===null||e===void 0||(n=e.internal)===null||n===void 0?void 0:n.currentLocale}},{key:"setCurrentLocale",value:function(e){e&&s.sendPostMessageToLuigiCore({msg:"luigi.ux.set-current-locale",data:{currentLocale:e}})}},{key:"isSplitView",value:function(){var e,n;return(e=c.currentContext)===null||e===void 0||(n=e.internal)===null||n===void 0?void 0:n.splitView}},{key:"isModal",value:function(){var e,n;return(e=c.currentContext)===null||e===void 0||(n=e.internal)===null||n===void 0?void 0:n.modal}},{key:"isDrawer",value:function(){var e,n;return(e=c.currentContext)===null||e===void 0||(n=e.internal)===null||n===void 0?void 0:n.drawer}},{key:"getCurrentTheme",value:function(){var e,n;return(e=c.currentContext)===null||e===void 0||(n=e.internal)===null||n===void 0?void 0:n.currentTheme}},{key:"getCSSVariables",value:function(){var e,n;return((e=c.currentContext)===null||e===void 0||(n=e.internal)===null||n===void 0?void 0:n.cssVariables)||{}}},{key:"applyCSS",value:function(){var e,n;document.querySelectorAll("head style[luigi-injected]").forEach(function(l){l.remove()});var o=(e=c.currentContext)===null||e===void 0||(n=e.internal)===null||n===void 0?void 0:n.cssVariables;if(o){var a=`:root {
`;Object.keys(o).forEach(function(l){var d=o[l];a+=(l.startsWith("--")?"":"--")+l+":"+d+`;
`}),a+="}";var u=document.createElement("style");u.setAttribute("luigi-injected",!0),u.innerHTML=a,document.head.appendChild(u)}}}])})(y),G=new K,m=new Map,Q=(function(r){function i(){var t;return v(this,i),t=h(this,i),t.storageEventProcessor=new q,s.addEventListener("storage",function(e,n){return t.storageEventProcessor.processEvent(e,n)}),t}return p(i,r),f(i,[{key:"setItem",value:function(e,n){var o=this;return new Promise(function(a,u){o.storageEventProcessor.execute(a,u,"setItem",{key:e,value:n})})}},{key:"getItem",value:function(e){var n=this;return new Promise(function(o,a){n.storageEventProcessor.execute(o,a,"getItem",{key:e})})}},{key:"removeItem",value:function(e){var n=this;return new Promise(function(o,a){n.storageEventProcessor.execute(o,a,"removeItem",{key:e})})}},{key:"clear",value:function(){var e=this;return new Promise(function(n,o){e.storageEventProcessor.execute(n,o,"clear",{})})}},{key:"has",value:function(e){var n=this;return new Promise(function(o,a){n.storageEventProcessor.execute(o,a,"has",{key:e})})}},{key:"getAllKeys",value:function(){var e=this;return new Promise(function(n,o){e.storageEventProcessor.execute(n,o,"getAllKeys",{})})}}])})(y),q=(function(){function r(){v(this,r)}return f(r,[{key:"processEvent",value:function(t,e){try{var n=t.data.data;if(!m.has(n.id)){console.log("Impossible to find Promise method for message "+n.id);return}var o=m.get(n.id);n.status==="ERROR"?o.reject(n.result):o.resolve(n.result),m.delete(n.id)}catch(a){console.error(a)}}},{key:"waitForSyncResult",value:function(t){for(var e=new Date().getTime();!syncOperation.has(t);){var n=new Date().getTime()-e;if(n>1e4)throw"Storage operation is taking more than 1 second...Some problem with Luigi Core communication"}var o=syncOperation.get(t);return m.delete(t),o}},{key:"execute",value:function(t,e,n,o){var a=s.getRandomId();this.createPendingOperation(a,t,e),this.sendMessage(a,n,o)}},{key:"createPendingOperation",value:function(t,e,n){m.set(t,{resolve:e,reject:n})}},{key:"sendMessage",value:function(t,e,n){s.sendPostMessageToLuigiCore({msg:"storage",data:{id:t,operation:e,params:n}})}}])})(),J=new Q,Y=(function(){function r(){v(this,r),window!==window.top&&(window.document.head.getAttribute("disable-luigi-history-handling")!=="true"&&(history.pushState=history.replaceState.bind(history)),window.document.head.getAttribute("disable-luigi-runtime-error-handling")!=="true"&&window.addEventListener("error",function(i){var t=i.filename,e=i.message,n=i.lineno,o=i.colno,a=i.error,u={msg:"luigi-runtime-error-handling",errorObj:{filename:t,message:e,lineno:n,colno:o,error:a}};s.sendPostMessageToLuigiCore(u)}))}return f(r,[{key:"addInitListener",value:function(t,e){return c.addInitListener(t,e)}},{key:"removeInitListener",value:function(t){return c.removeInitListener(t)}},{key:"addContextUpdateListener",value:function(t){return c.addContextUpdateListener(t)}},{key:"removeContextUpdateListener",value:function(t){return c.removeContextUpdateListener(t)}},{key:"getToken",value:function(){return c.getToken()}},{key:"getEventData",value:function(){return c.getEventData()}},{key:"getContext",value:function(){return c.getContext()}},{key:"addNodeParams",value:function(t,e){return c.addNodeParams(t,e)}},{key:"getNodeParams",value:function(t){return c.getNodeParams(t)}},{key:"getActiveFeatureToggles",value:function(){return c.getActiveFeatureToggles()}},{key:"getPathParams",value:function(){return c.getPathParams()}},{key:"getCoreSearchParams",value:function(){return c.getCoreSearchParams()}},{key:"addCoreSearchParams",value:function(t,e){return c.addCoreSearchParams(t,e)}},{key:"getClientPermissions",value:function(){return c.getClientPermissions()}},{key:"sendCustomMessage",value:function(t){return c.sendCustomMessage(t)}},{key:"addCustomMessageListener",value:function(t,e){return c.addCustomMessageListener(t,e)}},{key:"removeCustomMessageListener",value:function(t){return c.removeCustomMessageListener(t)}},{key:"addInactiveListener",value:function(t,e){return c.addInactiveListener(t,e)}},{key:"removeInactiveListener",value:function(t){return c.removeInactiveListener(t)}},{key:"setTargetOrigin",value:function(t){return c.setTargetOrigin(t)}},{key:"getUserSettings",value:function(){return c.getUserSettings()}},{key:"isLuigiClientInitialized",value:function(){return c.isLuigiClientInitialized()}},{key:"luigiClientInit",value:function(){return c.luigiClientInit()}},{key:"getAnchor",value:function(){return c.getAnchor()}},{key:"setAnchor",value:function(t){return c.setAnchor(t)}},{key:"setViewGroupData",value:function(t){return c.setViewGroupData(t)}},{key:"linkManager",value:function(){return new H({currentContext:c.currentContext})}},{key:"uxManager",value:function(){return G}},{key:"lifecycleManager",value:function(){return c}},{key:"storageManager",value:function(){return J}}])})(),X=new Y;window.LuigiClient=X;
//# sourceMappingURL=luigi-client.mjs.map
